{% extends 'empty.html' %}

{% block title %}
    Домашняя страница
{% endblock %}

{% block content %}
    <h1>Домашняя страница</h1>
    {% for post in post_list %}
        <div class="alert alert-secondary mr-5">
            <p>
                <strong>
                    {{ post.title }}
                </strong>
            </p>
            <hr>
            <p>
                {{ post.text }}
            </p>
            <hr>
            <p class="mb-0 text-muted">
                {{ post.created_at|date:'d.m.Y H:i:s'}}
                <br>
                <a
                    href="#id_unsubscribe_blog"
                    data-toggle="modal"
                    data-whatever="{{ post.blog.id }}"
                    data-field-id="#id_blog_pk"
                >
                    Отписаться
                </a>
            </p>
        </div>
    {% empty %}
        <div class="alert alert-warning">
            <p>Нет постов для просмотра</p>
        </div>
    {% endfor %}

    {% if is_paginated %}
        {% include 'partial/pagination.html' with page_obj=page_obj %}
    {% endif %}

{% endblock %}

{% block modal %}
    <div class="modal fade SetModalValue" id="id_unsubscribe_blog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Подтвердить действие</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Вы действительно хотите отписаться от этого блога?</p>
                </div>
                <div class="modal-footer">
                    <form action="{% url 'blogs:unsubscribe' %}" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="blog_pk" id="id_blog_pk">
                        <input type="hidden" name="back", value="{{ request.path }}">
                        <button class="btn btn-danger" type="submit">Да</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </form>
                </div>
            </div> <!-- .modal-content -->
        </div> <!-- .modal-dialog -->
    </div> <!-- .modal -->
{% endblock %}
